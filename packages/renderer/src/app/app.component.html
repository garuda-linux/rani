<ng-container *transloco="let t">
  <div class="background min-h-svh">
    <garuda-shell id="shellBar" [menuItems]="menuItems()">
      @if (!configService.settings().leftButtons) {
        <div garudaShellBarStart>
          @if (loadingService.loading()) {
            <p-progress-spinner
              [style]="{
                'width': '1.5rem',
                'height': '1.5rem',
                'vertical-align': 'middle',
              }"
              ariaLabel="loading"
            />
          }
        </div>
      }
      @if (configService.settings().leftButtons) {
        <div garudaShellBarEnd>
          @if (loadingService.loading()) {
            <p-progress-spinner
              [style]="{
                'width': '1.5rem',
                'height': '1.5rem',
                'vertical-align': 'middle',
              }"
              strokeWidth="10"
              ariaLabel="loading"
            />
          }
        </div>
      }
      @if (taskManager.count() === 0) {
        <p-splitbutton
          [model]="applyMenuItems"
          (onClick)="taskManager.toggleTerminal(true)"
          garudaShellBarEnd
          severity="success"
          size="small"
        >
          <ng-template #content>
            {{ t('menu.pending') }}
          </ng-template>
        </p-splitbutton>
      }
      <div class="mt-5">
        <router-outlet></router-outlet>
      </div>
      <p-scroll-top></p-scroll-top>
    </garuda-shell>
  </div>

  <p-confirm-dialog></p-confirm-dialog>
  <rani-terminal #terminalComponent></rani-terminal>
  <rani-operation-manager #operationManagerComponent></rani-operation-manager>
</ng-container>
